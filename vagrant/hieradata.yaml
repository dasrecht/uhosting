---
classes:
  - uhosting::profiles::nginx
  - uhosting::profiles::uwsgi
  - uhosting::profiles::mariadb
  - uhosting::profiles::postgresql
  - uhosting::profiles::knot

uhosting::profiles::mariadb::root_password: 'Passw0rd'
uhosting::sites:
  status_tobrunet_ch:
    server_names:
      - 'status.tobrunet.ch'
    stack_type: 'php'
    database: true
    db_password: 'Passw0rddd'
    db_name: 'status_tnet'
    db_user: 'status_tnet'
    ssl_type: 'selfsigned'
    vhost_params:
      use_default_location: false
      www_root: '/var/www/status_tobrunet_ch/public_html/Cachet/public'
    vhost_locations:
      '/':
        location_custom_cfg:
          try_files:
            - 'try_files $uri /index.php$is_args$args'
      '~ \.php$':
        include:
          - 'uwsgi_params'
        location_custom_cfg:
          uwsgi_modifier1: 14
          uwsgi_pass: 'unix:/run/uwsgi/status_tobrunet_ch.socket'

uhosting::dns_zones:
  tobru.ch: {}
  tobrunet.ch: {}
  broesme.li: {}
